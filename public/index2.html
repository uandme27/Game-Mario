<div id="download">
    <a id="a" href="">Tải về</a>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>


<script>
    const firebaseConfig = {
  apiKey: "AIzaSyAAjIXXOEavNCxCFlGMOw1qwLZnwpWaPjY",
  authDomain: "game-mario-badcf.firebaseapp.com",
  databaseURL: "https://game-mario-badcf-default-rtdb.firebaseio.com",
  projectId: "game-mario-badcf",
  storageBucket: "game-mario-badcf.appspot.com",
  messagingSenderId: "561301570020",
  appId: "1:561301570020:web:e96c601d66a0598d7007f1"
};


// Initialize Firebase
firebase.initializeApp(firebaseConfig);
var contactFormDB = firebase.database().ref("game-mario");

// Đường dẫn đến tệp lưu dữ liệu văn bản
var textDataFilePath = "data.txt";

// Lấy dữ liệu từ Firebase
contactFormDB.once("value").then(function (snapshot) {
  // Lấy giá trị dữ liệu từ snapshot
  var data = snapshot.val();

  // Map the data to the desired format
  var formattedData = Object.keys(data).map(function(key) {
    var entry = data[key];
    return {
      name: entry.name || "",
      phone: entry.phone || "",
      email: entry.email || "",
      school: entry.school || "",
      province: entry.province || ""
    };
  });

  // Chuyển dữ liệu đã được định dạng thành chuỗi JSON
  var dataText = JSON.stringify(formattedData, null, 2); 


  // Tạo một tệp văn bản và ghi dữ liệu vào đó
  var blob = new Blob([dataText], { type: "text/plain" });
  var url = URL.createObjectURL(blob);

  // Tạo một liên kết để tải tệp văn bản
  
  
  var a = document.getElementById("a");
  a.href = url;
  a.download = textDataFilePath; // Tên tệp văn bản khi tải về

}).catch(function (error) {
  console.error("Lỗi khi lấy dữ liệu từ Firebase: " + error);
});




</script>

<style>
    #a {
        width: 200px;
        height: 200px;
        background-color: red;
    }
</style>